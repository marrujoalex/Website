<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Basics - OpenKitten Docs</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="..">OpenKitten Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Leopard <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li class="active">
    <a href="./">Basics</a>
</li>

                        
                            
<li >
    <a href="advanced-routing/">Advanced routing</a>
</li>

                        
                            
<li >
    <a href="errors/">Errors</a>
</li>

                        
                            
<li >
    <a href="config/">Configuration</a>
</li>

                        
                            
<li >
    <a href="request-response/">Request & Response</a>
</li>

                        
                            
<li >
    <a href="cookies-sessions/">Cookies & Sessions</a>
</li>

                        
                            
<li >
    <a href="middlewares/">Middlwares</a>
</li>

                        
                            
<li >
    <a href="websocket/">WebSocket</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="..">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="advanced-routing/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#leopard-basics">Leopard basics</a></li>
        
            <li class="second-level"><a href="#spm-packageswift">SPM - Package.swift</a></li>
            
        
            <li class="second-level"><a href="#a-basic-synchronous-http-server">A basic (synchronous) HTTP server</a></li>
            
        
            <li class="second-level"><a href="#a-basic-asynchronous-http-server">A basic asynchronous HTTP server</a></li>
            
        
            <li class="second-level"><a href="#combining-sync-and-async">Combining Sync and Async</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="leopard-basics">Leopard basics</h1>
<p>Leopard is a high performance web framework, built 100% in Swift. It provides an easy to use sync and async API.</p>
<p>This guide will help you set up Leopard from your terminal. It assumed Swift 4 has been set up.</p>
<h2 id="spm-packageswift">SPM - Package.swift</h2>
<p>When creating a project using <code>swift package init --type=executable</code>, you'll notice that a set of files and directories have appeared in the current directory. One of these files is <code>Package.swift</code>, the project definition.</p>
<p>In here, a basic template will be shown. Let's add Leopard to that using:</p>
<pre><code class="swift">.package(url: &quot;https://github.com/OpenKitten/Leopard.git&quot;, .revision(&quot;master&quot;)),
</code></pre>

<p>And by adding <code>"Leopard"</code> to your target's dependencies.</p>
<pre><code class="swift">// swift-tools-version:4.0
// The swift-tools-version declares the minimum version of Swift required to build this package.

import PackageDescription

let package = Package(
    name: &quot;Example&quot;,
    dependencies: [
        .package(url: &quot;https://github.com/OpenKitten/Leopard.git&quot;, .revision(&quot;master&quot;)),
    ],
    targets: [
        .target(
            name: &quot;Example&quot;,
            dependencies: [&quot;Leopard&quot;]),
    ]
)
</code></pre>

<h2 id="a-basic-synchronous-http-server">A basic (synchronous) HTTP server</h2>
<p>First you'll need to import the framework on top of your <code>main.swift</code>, like so:</p>
<pre><code class="swift">import Leopard
</code></pre>

<p>This includes all necessary classes, structs and functions to get started.</p>
<p>In Leopard, there are three APIs to chose from. The Synchronous, Asynchronous and combined API.</p>
<pre><code class="swift">// Create an HTTP server at port `80`
let server = try SyncWebServer()

// TODO: Set up routes

// start the server
try server.start()
</code></pre>

<p>The above will start a webserver without routes. So let's put some routes in the place of the <code>TODO:</code></p>
<pre><code class="swift">server.get(&quot;path&quot;, &quot;to&quot;, &quot;route&quot;) { request in
  return &quot;Hello world&quot;
}
</code></pre>

<p>The following creates a <code>GET /path/to/route</code> handler that always returns <code>"Hello world"</code>.</p>
<h2 id="a-basic-asynchronous-http-server">A basic asynchronous HTTP server</h2>
<p>After <code>import Leopard</code> has been put on top of your <code>main.swift</code>, you'll need to create an <code>AsyncWebServer</code> like so:</p>
<pre><code class="swift">// Create an HTTP server at port `80`
let server = try AsyncWebServer()

// TODO: Set up routes

// start the server
try server.start()
</code></pre>

<p>This is almost identical to the sync webserver.</p>
<p>Basic routes are more complex than sync routes and provide no benefit with plaintext requests.</p>
<p>Async requests always require a future to be returned as a response.</p>
<pre><code class="swift">server.get(&quot;path&quot;, &quot;to&quot;, &quot;route&quot;) { request in
  return Future { &quot;Hello world&quot; }
}
</code></pre>

<p>The following also creates a <code>GET /path/to/route</code> handler that always returns <code>"Hello world"</code>.</p>
<h2 id="combining-sync-and-async">Combining Sync and Async</h2>
<p>For basic (plain) operations, synchronous is slightly faster than async, due to the overhead of the futures. However, when you mix external sources like databases and API calls into the formula, asynchronous requests not only become much lighter, but they reduce the impact on simultaneous requests by not blocking the thread.</p>
<p>For this reason, we support synchronous and asynchronous requests in harmony, side by side.</p>
<pre><code class="swift">// Create an HTTP server at port `80`
let server = try WebServer()

// TODO: Set up routes

// start the server
try server.start()
</code></pre>

<p>To create a synchronous route in place of the <code>TODO:</code> you simply select the <code>sync</code> scope getter.</p>
<pre><code class="swift">server.sync.get(&quot;path&quot;, &quot;to&quot;, &quot;route&quot;) { request in
  return &quot;Hello world&quot;
}
</code></pre>

<p>And when you need asynchronous behaviour for heavier operations:</p>
<pre><code class="swift">server.async.get(&quot;path&quot;, &quot;to&quot;, &quot;route&quot;) { request in
  return Future { &quot;Hello world&quot; }
}
</code></pre></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
